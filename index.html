<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intro to R Functions for Data Science</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
        }
        h3 {
            color: #2980b9;
        }
        code {
            background-color: #f0f0f0;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
            border-left: 3px solid #3498db;
        }
        .example {
            background-color: #e8f4fc;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .ethics {
            background-color: #fff8e1;
            padding: 10px;
            border-radius: 5px;
            border-left: 3px solid #ffc107;
            margin: 15px 0;
        }
        .checkpoint {
            background-color: #e8f5e9;
            padding: 10px;
            border-radius: 5px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>Writing Basic R Functions for Data Science</h1>
    <p>Learn to automate your data tasks with simple, reusable functions.</p>

    <h2>1. What's a Function? (7 min)</h2>
    <p>Functions are like kitchen appliances: you put ingredients in, magic happens, and you get results!</p>

    <div class="example">
        <h3>Your First Function</h3>
        <pre><code># Converts carats to approximate size in mm
carat_to_size <- function(carat) {
  size_mm <- carat^(1/3) * 6.5
  return(size_mm)
}

# Try it!
carat_to_size(1)  # A 1-carat diamond</code></pre>
    </div>

    <div class="ethics">
        <h3>Ethical Thinking</h3>
        <p><strong>Dataset Alert:</strong> The <code>diamonds</code> data doesn't tell us where gems were mined.</p>
        <p>ðŸ¤” If you wrote a function to find the "best deal" diamonds, how might this ignore ethical concerns about mining practices?</p>
    </div>

    <div class="checkpoint">
        <h3>Do You Understand?</h3>
        <p><strong>Q:</strong> What happens if you run <code>carat_to_size("one")</code>? How could you prevent this?</p>
    </div>

    <h2>2. Making Functions Smarter (7 min)</h2>
    <p>Add checks and options to handle real-world data.</p>

    <div class="example">
        <h3>Improved Version</h3>
        <pre><code>carat_to_size <- function(carat, shape = "round") {
  # Error checking
  if (!is.numeric(carat)) {
    stop("Carat must be a number!")
  }
  
  # Different shapes have different sizes
  if (shape == "round") {
    size_mm <- carat^(1/3) * 6.5
  } else {
    size_mm <- carat^(1/3) * 6.0
  }
  
  return(size_mm)
}</code></pre>
    </div>

    <div class="ethics">
        <h3>Ethical Thinking</h3>
        <p>Your function assumes all diamonds are perfectly cut.</p>
        <p>ðŸ¤” How might this mislead someone comparing prices for irregularly-shaped gems?</p>
    </div>

    <h2>3. Functions for Data Frames (7 min)</h2>
    <p>Automate your data cleaning tasks.</p>

    <div class="example">
        <h3>Cleaning Function</h3>
        <pre><code># Adds a "size" column to diamonds data
add_diamond_size <- function(data) {
  data |>
    mutate(
      size_mm = carat_to_size(carat),
      price_per_mm = price / size_mm
    )
}

# Try it!
diamonds_enhanced <- add_diamond_size(diamonds)</code></pre>
    </div>

    <div class="ethics">
        <h3>Ethical Thinking</h3>
        <p>Your function calculates "value" as price per millimeter.</p>
        <p>ðŸ¤” Could this unfairly advantage certain diamond cuts? How would you improve it?</p>
    </div>

    <h2>4. Simple Plot Functions (7 min)</h2>
    <p>Create reusable visualizations.</p>

    <div class="example">
        <h3>Basic Plot Template</h3>
        <pre><code>plot_diamonds <- function(data, var_to_plot) {
  ggplot(data, aes(x = {{ var_to_plot }})) +
    geom_histogram(fill = "deepskyblue", color = "black") +
    labs(title = paste("Distribution of", deparse(substitute(var_to_plot))))
}

# Try it!
plot_diamonds(diamonds, carat)</code></pre>
    </div>

    <div class="ethics">
        <h3>Ethical Thinking</h3>
        <p>Your histogram might be used in a jewelry store's marketing.</p>
        <p>ðŸ¤” What should you document about the data's limitations?</p>
    </div>

    <h2>Key Takeaways</h2>
    <ul>
        <li>Functions save time and reduce errors</li>
        <li>Always check your inputs</li>
        <li>Simple functions are better than complex ones</li>
        <li>Document your assumptions</li>
    </ul>

    <div class="ethics">
        <h3>Final Challenge</h3>
        <p>Imagine you're writing a <code>recommend_diamond()</code> function for a shopping website.</p>
        <p>ðŸ¤” What <strong>three ethical considerations</strong> would you build into your function?</p>
    </div>
</body>
</html>
